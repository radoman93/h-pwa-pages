{"version":3,"file":"default-src_app_helper_modal_helper_ts.js","mappings":"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","sources":["./src/app/helper/modal.helper.ts","./src/app/modals/get-voucher/get-voucher.page.ts"],"sourcesContent":["import {ModalController} from \"@ionic/angular\";\r\nimport {SoldPage} from \"../pages/sold/sold.page\";\r\nimport {Injectable} from \"@angular/core\";\r\nimport {EditProfilePage} from \"../modals/edit-profile/edit-profile.page\";\r\nimport {VoucherPage} from \"../pages/voucher/voucher.page\";\r\nimport {GetVoucherPage} from \"../modals/get-voucher/get-voucher.page\";\r\n\r\n\r\n@Injectable({\r\n  providedIn: 'root'\r\n})\r\nexport class ModalHelper{\r\n  constructor(private modalController: ModalController) {\r\n  }\r\n  async openSoldModal() {\r\n    const modal = await this.modalController.create({\r\n      component: SoldPage,\r\n      cssClass: 'sold-modal',\r\n      componentProps: {},\r\n      backdropDismiss: true\r\n    });\r\n    modal.onDidDismiss().then((dataReturned) => {\r\n      if (dataReturned !== null) {\r\n        // this.user = dataReturned.data;\r\n        // alert('Modal Sent Data :'+ dataReturned);\r\n      }\r\n    });\r\n    return await modal.present();\r\n  }\r\n\r\n  async openVoucherModal() {\r\n    const modal = await this.modalController.create({\r\n      component: GetVoucherPage,\r\n      cssClass: 'voucher-modal',\r\n      componentProps: {},\r\n      backdropDismiss: true\r\n\r\n    });\r\n    modal.onDidDismiss().then((dataReturned) => {\r\n      if (dataReturned !== null) {\r\n        // this.user = dataReturned.data;\r\n        // alert('Modal Sent Data :'+ dataReturned);\r\n      }\r\n    });\r\n    return await modal.present();\r\n  }\r\n\r\n  async openEditModal() {\r\n    const modal = await this.modalController.create({\r\n      component: EditProfilePage,\r\n      cssClass: 'edit-modal',\r\n      componentProps: {},\r\n      backdropDismiss: true\r\n\r\n    });\r\n    modal.onDidDismiss().then((dataReturned) => {\r\n      if (dataReturned !== null) {\r\n        // this.user = dataReturned.data;\r\n        // alert('Modal Sent Data :'+ dataReturned);\r\n      }\r\n    });\r\n    return await modal.present();\r\n  }\r\n}\r\n","import {Component, OnInit} from '@angular/core';\r\nimport VoucherStore from '../../store/voucher.store';\r\nimport {ModalController} from '@ionic/angular';\r\nimport {IUser} from '../../model/user.model';\r\n\r\nimport * as Parse from 'parse';\r\nimport {IVoucher, IVoucherRequest, IVoucherRequestParse} from '../../model/voucher.model';\r\nimport {ParseHelper} from '../../helper/parse.helper';\r\nimport {VoucherService} from '../../service/voucher.service';\r\nimport {UserStore} from \"../../store/user.store\";\r\nimport VoucherBrandStore from \"../../store/voucherBrand.store\";\r\n\r\n@Component({\r\n  selector: 'app-get-voucher',\r\n  templateUrl: './get-voucher.page.html',\r\n  styleUrls: ['./get-voucher.page.scss'],\r\n})\r\nexport class GetVoucherPage implements OnInit {\r\n  uploaded: boolean;\r\n  user: IUser;\r\n  vouchers: IVoucher[];\r\n  step = 0;\r\n\r\n  constructor(public voucherBrandStore: VoucherBrandStore, public userStore: UserStore, public voucherStore: VoucherStore, private modalController: ModalController, private voucherService: VoucherService) {\r\n    this.user = Parse.User.current().toJSON() as unknown as IUser;\r\n    this.vouchers = this.voucherStore.vouchers.filter(v=>v.brand.objectId===this.voucherBrandStore.selectedVoucherBrand.objectId);\r\n  }\r\n\r\n  ngOnInit() {\r\n  }\r\n\r\n  selectVoucher(voucher: IVoucher){\r\n    this.voucherStore.setSelectedVoucher(voucher);\r\n    this.step++;\r\n  }\r\n\r\n  async requestVoucher() {\r\n    try {\r\n      this.uploaded = false;\r\n\r\n\r\n      const voucher: Parse.Object = await ParseHelper.getParseObjectWithoutData('Voucher', this.voucherStore.selectedVoucher.objectId);\r\n      // const voucherRequest: IVoucherRequestParse = {\r\n      //   voucher,\r\n      //   user: Parse.User.current()\r\n      // };\r\n\r\n      const voucherRequest: IVoucherRequest = {\r\n        voucher: this.voucherStore.selectedVoucher,\r\n      };\r\n\r\n      await this.voucherService.requestVoucher(voucherRequest);\r\n      const delay = ms => new Promise(res => setTimeout(res, ms));\r\n      await delay(1000);\r\n      this.uploaded = true;\r\n\r\n      await this.closeModal();\r\n      // this.user =\r\n    } catch (e) {\r\n      const delay = ms => new Promise(res => setTimeout(res, ms));\r\n      await delay(1000);\r\n      this.uploaded = true;\r\n      console.log('Error:', e);\r\n    }\r\n  }\r\n\r\n  async closeModal() {\r\n    await this.modalController.dismiss();\r\n  }\r\n\r\n  previousPage() {\r\n    if(this.step!==0){\r\n      this.step--;\r\n    }\r\n  }\r\n}\r\n"],"names":[],"sourceRoot":"webpack:///","x_google_ignoreList":[]}